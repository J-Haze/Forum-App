(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{255:function(e,t,a){},259:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAB3klEQVRIiaWVMUscURRG74NliyXFsohIWJYgFiGFSEgRQkhp6z+wSGklkjpglcKfYJU6lZVIIBJCkLAxKSLIICZYiMgmWoQQFrPfSTF39GWi8sa5MPBmYM5375l5M2Y1C2gBK8AAeAvcq8ssBzwHRlzUATAN1ANLagMPgC6wHQUg6RswXafrjqS+pFNgFhgrQiQVx8GNdAEtSbeAVW94AMxK6kr6wL+1WRXelrQJLABNSS+961PgievqSypUDarAJyS99/GHwKKHrPq1WFdf0kjSSjIceFcafyhpAfhPl0+yDLRS4J3YbTG+r4dX6Hqc2vltf1vO4ZccZ8BSpCsDJlPgXWCLtDqLdI2nwMcknW+ekpZL10AGdFLgPUnbZS3XrYH9VC09oJ+opQjKSNmxZS3XAOPT/VR4U9JGRS17SVo84A7wk3yjHAO/JcWf4HLtAneT4B4w7ze+IH/IM8CzK+CZpHS4mZmkVz76wyj0kX9PYkUZ0KsEB9rAoetpRNengB9R51+AqUpwM2uY2X0zGzezT/kwaoQQZsxszsz+eNhOCGEuhPC1aoCR/7ALDVuSjiItv4DXwERlcBTwOdIwknQErAFPJU0CzRvDLVd04gremNl6COFjCOF7HWhcfwGfYgArVow0jwAAAABJRU5ErkJggg=="},260:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABiUlEQVRIia3UsUuVURzG8Q8id5CGi4hIXCTCIRrCwSEiGhr6MxwamyKahWhwuH+CU7OTk4iQRITILRoU5BISDiJxK4cIkRAdzrl47tsr73nv9YEzvAd+3+d3nt97DqNrAm308AH3b4A5oCWc4yKuQzy4CXATC2jhS2Jwge+jmkyigxM8w1SJyaEh45rALaxEUC+atLBTMNmqC2/Gohdo4F0EneBJNOkkBr068Bl8ioVneBlN+idJ4+oIg2/XgX80ePyzeJLr4nojxFmpSf9nWzQpxvU4t/PbBjMtW//wylVcXdzNgbewXQFPTfpxTefAy/7rqtUV4qzU7BDwA5mxzKrOvKzzrBs7TCwHufAGNmrCv8mMBe7gj3BRfuDU4BNcXPu4lwuHxVi4LMxhHq+vgXfrwmE1Fj9M9h6VnKIbG6ilJo6EeMaT/Tn8SuC7ca+2ngo3cQdj0WQBb4V59OHZAy2qnXS5jePk+y82hdd0aH1NgOfRYA3PY9eNUeDj+I09vMc6PuPnKNBUlzFhzgiQEZKYAAAAAElFTkSuQmCC"},261:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7EAAAOxAGVKw4bAAACH0lEQVRIia2WP2sVURDFz1keEiweIVhJEBslELF4hQZt5BU26scQMWBj5RcQP4CVaCNWFna2UVBEBBstXhFRQRMhFgZUFMXMz8K7eXc3d5MXdeCys3f+nJlz5y4r7SDAICIeRsQ68CWtdeBxRCwAO6XYNvlB4D2wERFrwGpErAJrwEZ6zv01QERcAYiI2xGxD9ib1gxwI9mubZej10o4sD2dbZ0EZPu1pKOt2FeJnmPAMNv/LOm57aZ3ouM7HRIRXaa2/ACO1HmrlLwv6SIw1dVqXVF9qECXvgc4D8xIktPmAeCtpMr2pnOXPonYnrc96iWAT5Iu2Z6XtCjpkaR7JZAuAc7YPi3pFvBC0oeS06nE4/WJSx3HXk2xZ/P9quCY64sRsQQM0njeiYi7QB+YS7bLeWybxsaYSgrbkQUcsj0Epm33JC3YnpLUA/q2h5Le1MWWzmlLByUpcd9O1jUADYC2UylJ26cUk0uvw1gV9hp6uuEl2ybFWzpoV1Wqdrf3ojhFdTWTJMnsxWIbFLXbrkFKesm3JA3U7HtTf6O2VPvPFOVA/50ijSdg11OUvTemqA1QO9cU3bS9JOmlpG/ABf25sV9tLwPnbL9L4EVa24cctmV7f0T0qqoaSRplLg8y/aek+5IUERUwm4AaHTTGAJiW9FTSYUkrkn5lLTcCNaaxSmsWWLF93PbHEjM1yAB4wvgXpbEioqgDz4AT7Xy/AehbH63ctxw0AAAAAElFTkSuQmCC"},262:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7EAAAOxAGVKw4bAAACAklEQVRIia2WsWpVQRCGvz0cRCwuIVhJEBslqFjcQoM2ksJGfQwRA2msfAHxAaxEG7GysLONgiIi2GhhoWihiaBFAokohmR/i91NZtfde6+SgeHMmZ35Z/bfOXsvjBHB0MNTD2uCjahrguce5jQOYAz4EcEXwbaHb4IVDysK9nZ8zv53AQ83BPJw38NBwYGo04I7ce3WKIy+ABw6mDKucwIcfAROFbkfIj2nBfPGvw68dmWlSMcvgWrqG/6K/hacTLhdBB8A1wT7W1tNHck8G/Y+wRXBtO3+sA8HudPtKHsSFRzfOQPBKrDo4ASwADwDHqXOU3d/8ZpTfNHBBeCe4A3wtRZ0PvJ4ewRWq8DNmHvJ+rtKoLUXPCwJhnE8H3h4KBgIZuPadZtbfnh98e4deJNw1MG8YMqF2DkXBqEXDFwYz0+pWUtncwc1qXFfgrWujKxAGVQDKWNqOVb6xmJX8WW22mveuOsUqXhavx3ZSW7S6hSlbiYBMevVZjOKym3D5BS1JKtq7pt0R2WyJxTZQntOEbsT8M9TZN6zKSoLpOBE0V0HS8Bb4KfgKuGL/eHgveCyg8+xeJXW8pC9C8GHPPQdvCNokifG3gQex5Y7wUwslO0gGwSFn8uXwDFgGdgyW84S2aWxizojWHZwxsH3GjOpyFDwwvxFydQ3bMErwdkS7w+KgRmIqAkGugAAAABJRU5ErkJggg=="},264:function(e,t,a){e.exports=a(536)},494:function(e,t,a){},511:function(e,t,a){},516:function(e,t,a){},518:function(e,t,a){},519:function(e,t,a){},532:function(e,t,a){},535:function(e,t,a){},536:function(e,t,a){"use strict";a.r(t);a(135),a(147),a(148),a(149),a(150),a(151),a(152),a(153),a(154),a(155),a(156),a(157),a(158),a(159),a(160),a(265),a(266),a(267),a(268),a(269),a(270),a(271),a(272),a(273),a(164),a(274),a(275),a(88),a(276),a(277),a(278),a(279),a(280),a(281),a(282),a(283),a(284),a(285),a(286),a(287),a(288),a(289),a(290),a(292),a(294),a(295),a(173),a(90),a(296),a(297),a(298),a(299),a(300),a(301),a(302),a(303),a(304),a(305),a(306),a(307),a(308),a(309),a(310),a(311),a(178),a(312),a(313),a(314),a(315),a(316),a(317),a(318),a(319),a(320),a(322),a(323),a(325),a(326),a(327),a(328),a(329),a(330),a(331),a(332),a(333),a(334),a(335),a(336),a(337),a(338),a(339),a(340),a(341),a(342),a(343),a(123),a(345),a(346),a(347),a(348),a(349),a(351),a(352),a(353),a(354),a(355),a(356),a(357),a(358),a(359),a(360),a(361),a(190),a(362),a(363),a(125),a(364),a(365),a(366),a(367),a(98),a(368),a(369),a(370),a(371),a(372),a(373),a(374),a(375),a(376),a(377),a(378),a(379),a(380),a(381),a(382),a(383),a(384),a(385),a(386),a(387),a(388),a(389),a(390),a(391),a(392),a(393),a(395),a(396),a(397),a(398),a(399),a(400),a(401),a(402),a(403),a(404),a(405),a(406),a(407),a(408),a(409),a(410),a(411),a(412),a(413),a(414),a(415),a(416),a(417),a(418),a(419),a(420),a(421),a(422),a(423),a(424),a(425),a(426),a(427),a(130),a(428),a(429),a(430),a(431),a(432),a(433),a(434),a(198),a(199),a(200),a(201),a(202),a(203),a(204),a(205),a(206),a(207),a(208),a(209),a(210),a(211),a(212),a(213),a(214),a(437),a(438),a(439),a(440),a(441),a(442),a(443),a(444),a(445),a(446),a(447),a(448),a(449),a(450),a(451),a(452),a(454),a(455),a(456),a(457),a(458),a(459),a(460),a(461),a(462),a(463),a(464),a(216),a(218),a(219),a(220),a(221),a(222),a(223),a(224),a(225),a(226),a(227),a(228),a(229),a(230),a(231),a(232),a(233),a(234),a(465),a(466),a(467),a(469),a(235),a(236),a(237),a(470),a(471),a(472),a(473),a(474),a(475),a(476),a(477),a(239),a(478),a(479),a(480),a(482),a(241),a(483),a(242);var n=a(0),o=a.n(n),c=a(256),i=a.n(c),r=(a(494),a(5)),s=a(55),l=a(19),m=a.n(l),u=a(11);a(511);var d=function(e){var t=Object(s.f)();return o.a.createElement("div",{id:"header"},o.a.createElement("div",{id:"header-container"},o.a.createElement(u.b,{className:"link",to:"/forum-app/"},o.a.createElement("div",{id:"title"},"Justin's Forum App")),e.isLoggedIn?o.a.createElement("div",{id:"btn-cont-auth",className:"header-btn-cont"},e.isViewingProfile?o.a.createElement(u.b,{id:"home-btn",className:"link header-btn",to:"/forum-app/"},"Home"):o.a.createElement(u.b,{id:"profile-btn",className:"link header-btn",to:"/forum-app/user/".concat(e.currentUser._id)},"Profile"),o.a.createElement(u.b,{id:"new-post-btn",className:"link header-btn",to:"/forum-app/post/new"},"New Post"),o.a.createElement("div",{id:"log-out-btn",className:"header-btn",onClick:function(){e.setIsLoggedIn(!1),e.setCurrentUser(""),localStorage.setItem("token",JSON.stringify("No token")),t.go(0)}},"Log Out")):o.a.createElement("div",{id:"btn-cont-unauth",className:"header-btn-cont"},o.a.createElement(u.b,{id:"sign-up-btn",className:"link header-btn",to:"/forum-app/sign-up"},"Sign Up"),o.a.createElement(u.b,{id:"log-in-btn",className:"link header-btn",to:"/forum-app/log-in"},"Log In"))))},p=(a(516),a(52)),f=a.n(p);var g=function(e){return o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-title"},o.a.createElement(u.b,{className:"link",to:"/forum-app/post/".concat(e._id)},e.title)),o.a.createElement("div",{className:"card-subtitle"},"Posted by"," ",o.a.createElement(u.b,{className:"link",to:"/forum-app/user/".concat(e.author_id)},o.a.createElement("strong",null,e.author))," ","on ",f()(e.createdAt).format("LLL")))};var h=function(e){var t=Object(n.useState)(0),a=Object(r.a)(t,2),c=a[0],i=a[1];return Object(n.useEffect)((function(){var t=0;e.displayedBlogs.length>0&&(e.displayedBlogs.forEach((function(e){e.isPublished&&t++})),i(t))}),[e.displayedBlogs]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{id:"home"},e.loading?o.a.createElement("div",null,"Loading... "):0===c?o.a.createElement("div",{className:"black-text no-blogs"},"No blogs have been posted yet."):o.a.createElement("div",{id:"home-blog-cont"},o.a.createElement("div",{className:"main-subtitle"},"All Posts:"),e.displayedBlogs.map((function(e){return e.isPublished?o.a.createElement(g,{key:e._id,_id:e._id,title:e.title,text:e.text,author:e.author,author_id:e.author_id,createdAt:e.createdAt,updatedAt:e.updatedAt}):""})))))};a(518);var b=function(e){var t=Object(n.useState)(""),a=Object(r.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(""),u=Object(r.a)(l,2),d=u[0],p=u[1],f=Object(n.useState)(""),g=Object(r.a)(f,2),h=g[0],b=g[1],E=Object(s.f)();return e.isLoggedIn&&E.push("/forum-app/"),o.a.createElement("div",{className:"login-cont"},o.a.createElement("div",{className:"login-content",onClick:function(e){e.stopPropagation()}},o.a.createElement("div",{id:"title-login"}," Log In: "),o.a.createElement("input",{id:"username",className:"input",placeholder:"Username",value:c,onChange:function(e){return i(e.target.value)}}),o.a.createElement("input",{id:"password",className:"input",placeholder:"Password",type:"password",value:d,onChange:function(e){return p(e.target.value)}}),o.a.createElement("div",{className:"error-message-login"},h),o.a.createElement("div",{id:"submit-login",onClick:function(){m.a.post("/user/log-in",{username:c,password:d}).then((function(t){t.data.message?b(t.data.message):(b(""),i(""),p(""),window.localStorage.setItem("token",JSON.stringify(t.data.token)),e.setTokenRefresh(!e.tokenRefresh),E.go(-1),e.setIsLoggedIn(!0))})).catch((function(e){return console.log("error",e)}))}},"Log In")))},E=(a(519),a(54)),A=a.n(E),v=new A.a;var w=function(e){var t=Object(n.useState)(""),a=Object(r.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(""),d=Object(r.a)(l,2),p=d[0],f=d[1],g=Object(n.useState)(""),h=Object(r.a)(g,2),b=h[0],E=h[1],A=Object(n.useState)(""),w=Object(r.a)(A,2),O=w[0],j=w[1],N=Object(s.f)();return e.isLoggedIn&&N.push("/forum-app/"),Object(n.useEffect)((function(){e.isLoggedIn&&N.push("/forum-app/")}),[]),o.a.createElement("div",{className:"signup-cont"},o.a.createElement("div",{className:"signup-content",onClick:function(e){e.stopPropagation()}},o.a.createElement("div",{id:"title-signup"}," Sign Up: "),o.a.createElement("input",{id:"username",className:"input",placeholder:"Username",value:c,onChange:function(e){return i(e.target.value)}}),o.a.createElement("input",{id:"password",className:"input",placeholder:"Password",type:"password",value:p,onChange:function(e){return f(e.target.value)}}),o.a.createElement("input",{id:"confirmPassword",className:"input",placeholder:"Confirm Password",type:"password",value:b,onChange:function(e){return E(e.target.value)}}),o.a.createElement("div",{className:"error-message-signup"},O),o.a.createElement("div",{id:"submit-signup",onClick:function(){!function(){if(v.isProfane(c))return alert("Username contains a word that is not allowed."),void i("");c.length<3||c.length>15?j("Please enter a Username between 2 and 15 characters."):p.length<3||p.length>15?j("Please enter a Password between 2 and 15 characters."):p===b?m.a.post("/user/new",{username:c,password:p,confirmPassword:b}).then((function(t){t.data.message?j(t.data.message):(j(""),i(""),f(""),E(""),m.a.post("/user/log-in",{username:c,password:p}).then((function(t){t.data.message?j(t.data.message):(window.localStorage.setItem("token",JSON.stringify(t.data.token)),e.setTokenRefresh(!e.tokenRefresh),e.setIsLoggedIn(!0),e.fetchUsers(),N.go(-1))})))})).catch((function(e){return console.log("error",e)})):j("Passwords do not match")}()}},"Sign Up"),o.a.createElement("div",{id:"bottom"},"Already registered?"," ",o.a.createElement(u.b,{className:"link-blue",to:"/forum-app/log-in"},"Log In"))))},O=(a(532),new A.a);var j=function(e){var t=Object(n.useState)(""),a=Object(r.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(""),d=Object(r.a)(l,2),p=d[0],g=d[1],h=Object(s.f)();return o.a.createElement("div",{className:"comment-section"},o.a.createElement("div",{className:"comment-header"},"Comments:"),e.comments.length>0?o.a.createElement("div",{className:"comment-box"},e.comments.map((function(t){return t.isPublished?t.author===e.currentUser._id?o.a.createElement("div",{key:t._id,className:"comment"},o.a.createElement("div",{className:"comment-text"},t.text),o.a.createElement("div",{className:"comment-author flex"},o.a.createElement(u.b,{className:"comment-link space-small",to:"/forum-app/user/".concat(t.author)},"- Commented by ",o.a.createElement("strong",null,t.username))," ","on ",f()(t.createdAt).format("LLL"),o.a.createElement("div",{className:"space-small"},"- "),o.a.createElement("div",{className:"comment-delete",onClick:function(){e.openDeleteCommentModal(t._id)}},"Delete"))):o.a.createElement("div",{key:t._id,className:"comment"},o.a.createElement("div",{className:"comment-text"},t.text),o.a.createElement("div",{className:"comment-author"},o.a.createElement(u.b,{className:"comment-link",to:"/forum-app/user/".concat(t.author)},"- Commented by ",o.a.createElement("strong",null,t.username))," ","on ",f()(t.createdAt).format("LLL"))):""}))):o.a.createElement("div",{className:"no-comments"}," No comments on this post."),o.a.createElement("div",{className:"leave-comment-section"},e.isLoggedIn?o.a.createElement("div",{className:"flex-down"},o.a.createElement("div",{id:"leave-comment-cont"},o.a.createElement("input",{id:"comment-input",placeholder:"Leave a comment",value:c,onChange:function(e){return i(e.target.value)}}),o.a.createElement("div",{id:"submit-comment-btn",onClick:function(){!function(){if(O.isProfane(c))return alert("Comment contains a word that is not allowed."),void i("");c.length<1?g("Comment field must not be blank"):c.length>140?g("Comments are limited to 140 characters."):m.a.post("/post/".concat(e.postid,"/comment"),{text:c},{headers:{Authorization:"Bearer ".concat(JSON.parse(window.localStorage.getItem("token")))}}).then((function(t,a){g(""),i(""),e.fetchComments(),h.push("/forum-app/post/".concat(e.postid))})).catch((function(e){return console.log("error",e)}))}()}},"Submit")),o.a.createElement("div",{className:"error-message-comment"},p)):o.a.createElement("div",{className:"no-user-cont"},o.a.createElement("div",{className:"no-user-text"},"Please log in to add a comment to this post"),o.a.createElement(u.b,{to:"/forum-app/log-in",style:{textDecoration:"none"},className:"no-user-btn"},"Log In"))),o.a.createElement(u.b,{to:"/forum-app/",style:{textDecoration:"none"},className:"back-btn"},"Home")," ")};var N=function(e){var t;return t="delete"===e.actionMessage?"delete":"edit",o.a.createElement("div",{className:"confirm-modal"},o.a.createElement("div",{className:"confirm-modal-content",onClick:function(e){e.stopPropagation()}},o.a.createElement("span",{className:"close",onClick:function(){e.hideConfirmModal()}},"\xd7"),o.a.createElement("div",{id:"action-message"},"Are you sure you want to ",t," this post?"),o.a.createElement("div",{id:"action-sub-message"},"This action cannot be undone."),o.a.createElement("div",{id:"submit-btn-cont"},o.a.createElement("div",{id:"submit-decline",className:"confirmation-btn",onClick:function(){e.hideConfirmModal()}},"Cancel"),o.a.createElement("div",{id:"submit-confirmation",className:"confirmation-btn",onClick:function(){e.deletePost(e.postid)}},"Delete"))))},C=(a(255),a(263)),k=function(e){return o.a.createElement(C.a,{initialValue:e.initialValue,apiKey:"hdxqf44jcs8bmjvjvxrdmn9tluoi2r215995izfgnwlfqytn",init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help"],toolbar:"undo redo | formatselect | bold italic backcolor |alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help"},onEditorChange:e.handleEditorChange})},S=new A.a;var P=function(e){var t=Object(n.useState)(e.initialTitle),a=Object(r.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(e.initialMainText),u=Object(r.a)(l,2),d=u[0],p=u[1],f=Object(n.useState)(""),g=Object(r.a)(f,2),h=g[0],b=g[1];Object(n.useEffect)((function(){return function(){e.hideEditModal()}}),[]);var E=Object(s.f)();return o.a.createElement("div",{className:"edit-post-cont"},o.a.createElement("div",{className:"edit-post-content",onClick:function(e){e.stopPropagation()}},o.a.createElement("div",{id:"title-edit-post"}," ","Edit post:",o.a.createElement("div",{id:"edit-post-back",onClick:function(){e.whitePencil(),e.hideEditModal()}},"Cancel")),o.a.createElement("input",{id:"edit-post-title",className:"input-edit-post-title",placeholder:"Title",value:c,onChange:function(e){return i(e.target.value)}}),o.a.createElement(k,{id:"mainText",placeholder:"Main Text",initialValue:e.initialMainText,handleEditorChange:function(e,t){p(e)}}),o.a.createElement("div",{className:"error-message"},h),o.a.createElement("div",{id:"submit-edit-post",onClick:function(){!function(){if(S.isProfane(c))return alert("Title contains a word that is not allowed."),void i("");c.length<1?b("Title field must not be blank"):c.length>100?b("Title field must less than 100 characters"):d.length<1?b("Post body must not be empty"):d.length>1e4?b("Post body must be less than 10,000 characters"):m.a.put("/post/".concat(e.postid),{title:c,text:d},{headers:{Authorization:"Bearer ".concat(JSON.parse(window.localStorage.getItem("token")))}}).then((function(t,a){b(""),e.fetchBlogs(),e.whitePencil(),e.hideEditModal(),E.push("/forum-app/post/".concat(e.postid))})).catch((function(e){return console.log("error",e)}))}()}},"Update Post")))};var I=function(e){return o.a.createElement("div",{className:"confirm-modal"},o.a.createElement("div",{className:"confirm-modal-content",onClick:function(e){e.stopPropagation()}},o.a.createElement("span",{className:"close",onClick:function(){e.hideDeleteCommentModal()}},"\xd7"),o.a.createElement("div",{id:"action-message"},"Are you sure you want to delete this comment?"),o.a.createElement("div",{id:"action-sub-message"},"This action cannot be undone."),o.a.createElement("div",{id:"submit-btn-cont"},o.a.createElement("div",{id:"submit-decline",className:"confirmation-btn",onClick:function(){e.hideDeleteCommentModal()}},"Cancel"),o.a.createElement("div",{id:"submit-confirmation",className:"confirmation-btn",onClick:function(){e.deleteComment(e.commentid)}},"Delete"))))},B=a(259),L=a.n(B),x=a(260),U=a.n(x),M=a(261),y=a.n(M),R=a(262),T=a.n(R);var V=function(e){var t=Object(n.useState)([]),a=Object(r.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(!1),d=Object(r.a)(l,2),p=d[0],g=d[1],h=Object(n.useState)(e.createdAt!==e.updatedAt),b=Object(r.a)(h,2),E=b[0],A=b[1],v=Object(n.useState)(""),w=Object(r.a)(v,2),O=w[0],C=w[1],k=Object(n.useState)(!1),S=Object(r.a)(k,2),B=S[0],x=S[1],M=Object(n.useState)(!1),R=Object(r.a)(M,2),V=R[0],J=R[1],W=Object(n.useState)(!1),X=Object(r.a)(W,2),F=X[0],z=X[1],D=Object(n.useState)(""),G=Object(r.a)(D,2),Q=G[0],H=G[1],K=Object(s.f)(),Y=function(){m.a.get("/post/".concat(e._id,"/comments")).then((function(e){i(e.data)}))};Object(n.useEffect)((function(){Y()}),[]),Object(n.useEffect)((function(){e.currentUser&&(e.currentUser.username===e.author?g(!0):g(!1))}),[e.currentUser,e.isLoggedIn,e.author]),Object(n.useEffect)((function(){e.createdAt!==e.updatedAt&&A(!0)}),[e.createdAt,e.updatedAt]),Object(n.useEffect)((function(){C(E?"- Last edit: ".concat(f()(e.updatedAt).format("LLL")):"")}),[e.createdAt,e.updatedAt,E]);var Z=function(){J(!1)},q=function(){H(""),z(!1)};return o.a.createElement(o.a.Fragment,null,e.editModalOpen?o.a.createElement(P,{hideEditModal:e.hideEditModal,postid:e._id,initialTitle:e.title,initialMainText:e.text,fetchBlogs:e.fetchBlogs,whitePencil:Z}):o.a.createElement("div",{id:"post-page"},e.confirmModalOpen&&o.a.createElement(N,{actionMessage:e.actionMessage,hideConfirmModal:e.hideConfirmModal,deletePost:e.deletePost,postid:e._id}),F&&o.a.createElement(I,{hideDeleteCommentModal:q,deleteComment:function(){m.a.put("/post/".concat(e._id,"/").concat(Q,"/unpublish"),{},{headers:{Authorization:"Bearer ".concat(JSON.parse(window.localStorage.getItem("token")))}}).then((function(t){Y(),q(),K.push("/forum-app/post/".concat(e._id))})).catch((function(e){console.log("error",e)}))}}),o.a.createElement("div",{className:"post-page-cont"},o.a.createElement("div",{className:"post-page-head"},o.a.createElement("div",{className:"post-title"},o.a.createElement(u.b,{className:"link",to:"/forum-app/post/".concat(e._id)},e.title)),p?o.a.createElement("div",{className:"post-subtitle-flex"},"Posted by you"," (",o.a.createElement(u.b,{className:"link",to:"/forum-app/user/".concat(e.author_id)},o.a.createElement("strong",null,e.author)),") ","on ",f()(e.createdAt).format("LLL"),o.a.createElement("div",{className:"message-editted"},o.a.createElement("em",null,O)),o.a.createElement("div",{className:"edit-box"},o.a.createElement("div",{id:"edit-btn",className:"user-btn",onClick:function(){e.openEditPost()},onMouseEnter:function(){J(!0)},onMouseLeave:function(){Z()}},V?o.a.createElement("img",{className:"icon",src:U.a,alt:"black pencil icon"}):o.a.createElement("img",{className:"icon",src:L.a,alt:"white pencil icon"})),o.a.createElement("div",{id:"delete-btn",className:"user-btn",onClick:function(){e.openDeletePost()},onMouseEnter:function(){x(!0)},onMouseLeave:function(){x(!1)}},B?o.a.createElement("img",{className:"icon",src:T.a,alt:"red trashcan icon"}):o.a.createElement("img",{className:"icon",src:y.a,alt:"white trashcan icon"})))):o.a.createElement("div",{className:"post-subtitle-flex"},"Posted by"," ",o.a.createElement(u.b,{className:"link space",to:"/forum-app/user/".concat(e.author_id)},o.a.createElement("strong",null,e.author))," ","on ",f()(e.createdAt).format("LLL"),o.a.createElement("div",{className:"message-editted"},o.a.createElement("em",null,O)))),o.a.createElement("div",{className:"post-content",dangerouslySetInnerHTML:{__html:e.text}}),o.a.createElement(j,{comments:c,currentUser:e.currentUser,isLoggedIn:e.isLoggedIn,fetchComments:Y,postid:e._id,openDeleteCommentModal:function(e){H(e),z(!0)},setCommentToDelete:H}))))};var J=function(e){var t=Object(n.useState)([]),a=Object(r.a)(t,2),c=a[0],i=a[1],s=Object(n.useState)(!1),l=Object(r.a)(s,2),u=l[0],d=l[1],p=Object(n.useState)(0),f=Object(r.a)(p,2),h=f[0],b=f[1],E=Object(n.useState)(!0),A=Object(r.a)(E,2),v=A[0],w=A[1];return Object(n.useEffect)((function(){m.a.get("/user/".concat(e._id,"/posts")).then((function(e){var t=e.data.reverse();i(t);var a=0;t.length>0&&t.forEach((function(e){e.isPublished&&a++})),b(a),w(!1)}))}),[]),Object(n.useEffect)((function(){return e.currentUser&&(e.currentUser.username===e.username?(d(!0),e.setIsViewingProfile(!0)):d(!1)),function(){e.setIsViewingProfile(!1)}}),[e.currentUser,e.username]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{id:"home"},v?o.a.createElement("div",null,"Loading... "):o.a.createElement("div",{id:"home-blog-cont"},u?o.a.createElement("div",{className:"main-subtitle"},"Your Posts:"):o.a.createElement("div",{className:"main-subtitle"},"Posts from ",o.a.createElement("em",null,e.username)," :"),0===h?o.a.createElement("div",{className:"black-text no-blogs"},"User has no blogs posted yet."):c.map((function(e){return e.isPublished?o.a.createElement(g,{key:e._id,_id:e._id,title:e.title,text:e.text,author:e.author,author_id:e.author_id,createdAt:e.createdAt,updatedAt:e.updatedAt}):""})))))},W=new A.a;var X=function(e){var t=Object(n.useState)(""),a=Object(r.a)(t,2),c=a[0],i=a[1],l=Object(n.useState)(""),u=Object(r.a)(l,2),d=u[0],p=u[1],f=Object(n.useState)(""),g=Object(r.a)(f,2),h=g[0],b=g[1],E=Object(s.f)();return e.isLoggedIn||E.push("/forum-app/"),o.a.createElement("div",{className:"new-post-cont"},o.a.createElement("div",{className:"new-post-content",onClick:function(e){e.stopPropagation()}},o.a.createElement("div",{id:"title-new-post"}," Create a new post: "),o.a.createElement("input",{id:"new-post-title",className:"input-new-post-title",placeholder:"Title",value:c,onChange:function(e){return i(e.target.value)}}),o.a.createElement(k,{id:"mainText",placeholder:"Main Text",initilaValue:d,handleEditorChange:function(e,t){p(e)}}),o.a.createElement("div",{className:"error-message-new-post"},h),o.a.createElement("div",{id:"submit-new-post",onClick:function(){!function(){if(W.isProfane(c))return alert("Title contains a word that is not allowed."),void i("");c.length<1?b("Title field must not be blank"):c.length>100?b("Title field must less than 100 characters"):d.length<1?b("Post body must not be empty"):d.length>1e4?b("Post body must be less than 10,000 characters"):m.a.post("/post/new",{title:c,text:d},{headers:{Authorization:"Bearer ".concat(JSON.parse(window.localStorage.getItem("token")))}}).then((function(t,a){var n=t.data.post._id;b(""),i(""),p(""),e.fetchBlogs(),E.push("/forum-app/post/".concat(n))})).catch((function(e){return console.log("error",e)}))}()}},"Create Post")))};a(535);var F=function(){return o.a.createElement("div",{id:"not-found-page"},o.a.createElement("h3",null,"Loading..."),o.a.createElement("div",null,"If page does not respond within 10 seconds:",o.a.createElement(u.b,{className:"link-not-found",to:"/forum-app/"},o.a.createElement("strong",null,"Click here"))))};var z=function(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)([]),l=Object(r.a)(i,2),u=l[0],p=l[1],f=Object(n.useState)([]),g=Object(r.a)(f,2),E=g[0],A=g[1],v=Object(n.useState)(!0),O=Object(r.a)(v,2),j=O[0],N=O[1],C=Object(n.useState)(!1),k=Object(r.a)(C,2),S=k[0],P=k[1],I=Object(n.useState)(""),B=Object(r.a)(I,2),L=B[0],x=B[1],U=Object(n.useState)(!1),M=Object(r.a)(U,2),y=M[0],R=M[1],T=Object(n.useState)(!0),W=Object(r.a)(T,2),z=W[0],D=W[1],G=Object(s.f)(),Q=function(){N(!0),m.a.get("/").then((function(e){var t=e.data;t.reverse();c(t.reverse()),p(t.reverse()),N(!1)}))};Object(n.useEffect)((function(){Q()}),[]);var H=function(){m.a.get("/user/users").then((function(e){A(e.data)}))};Object(n.useEffect)((function(){H()}),[]),Object(n.useEffect)((function(){m.a.get("/user/",{headers:{Authorization:"Bearer ".concat(JSON.parse(window.localStorage.getItem("token")))}}).then((function(e){x(e.data),R(!0)})).catch((function(e){return console.log("error",e)}))}),[z]);var K=Object(n.useState)(""),Y=Object(r.a)(K,2),Z=Y[0],q=Y[1],_=Object(n.useState)(!1),$=Object(r.a)(_,2),ee=$[0],te=$[1],ae=Object(n.useState)(!1),ne=Object(r.a)(ae,2),oe=ne[0],ce=ne[1];function ie(){q("delete"),te(!0)}function re(){te(!1)}function se(e){m.a.put("/post/".concat(e,"/unpublish"),{},{headers:{Authorization:"Bearer ".concat(JSON.parse(window.localStorage.getItem("token")))}}).then((function(e){Q(),re(),G.push("/forum-app/user/".concat(L._id))})).catch((function(e){console.log("error",e)}))}function le(){q("edit"),ce(!0)}function me(){ce(!1)}return o.a.createElement(n.Suspense,{fallback:o.a.createElement("div",null,"Loading...")},o.a.createElement(d,{isLoggedIn:y,setIsLoggedIn:R,setCurrentUser:x,currentUser:L,isViewingProfile:S,setIsViewingProfile:P}),o.a.createElement(s.c,null,o.a.createElement(s.a,{exact:!0,path:"/forum-app/",render:function(){return o.a.createElement(h,{fetchBlogs:Q,displayedBlogs:u,loading:j})}}),o.a.createElement(s.a,{exact:!0,path:"/forum-app/log-in",render:function(){return o.a.createElement(b,{isLoggedIn:y,setIsLoggedIn:R,setCurrentUser:x,setTokenRefresh:D,tokenRefresh:z})}}),o.a.createElement(s.a,{exact:!0,path:"/forum-app/sign-up",render:function(){return o.a.createElement(w,{isLoggedIn:y,setIsLoggedIn:R,setCurrentUser:x,setTokenRefresh:D,tokenRefresh:z,fetchUsers:H})}}),o.a.createElement(s.a,{exact:!0,path:"/forum-app/post/new",render:function(){return o.a.createElement(X,{fetchBlogs:Q,isLoggedIn:y})}}),a.map((function(e){return o.a.createElement(s.a,{exact:!0,key:e._id,path:"/forum-app/post/".concat(e._id),render:function(){return o.a.createElement(V,Object.assign({},e,{currentUser:L,isLoggedIn:y,deletePost:se,actionMessage:Z,setActionMessage:q,confirmModalOpen:ee,setConfirmModalOpen:te,openEditPost:le,openDeletePost:ie,hideConfirmModal:re,fetchBlogs:Q,hideEditModal:me,editModalOpen:oe}))}})})),E.map((function(e){return o.a.createElement(s.a,{exact:!0,key:e._id,path:"/forum-app/user/".concat(e._id),render:function(){return o.a.createElement(J,Object.assign({},e,{currentUser:L,setIsViewingProfile:P}))}})})),o.a.createElement(s.a,{render:function(){return o.a.createElement(F,null)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));m.a.defaults.baseURL="https://justins-forum-app.herokuapp.com",i.a.render(o.a.createElement(u.a,null,o.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[264,1,2]]]);
//# sourceMappingURL=main.2b77d991.chunk.js.map